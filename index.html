<html lang="tr">

<head>
    <base href="https://pdks.nisantasi.edu.tr/">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Language" content="tr">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Nish Yoklama - Öğrenci Girişi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <link rel="stylesheet" href="assets/css/main.css?v=19">

    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

    <style>
        /* Hide the up and down arrows for all browsers */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            appearance: none;
            margin: 0;
            /* Optional: You can add margin if needed */
        }
    </style>
</head>


<body class="bg-light p-4">
    <div class="d-none loader d-flex align-items-center justify-content-center position-fixed w-100 h-100" style="top:0; left:0; z-index:66">
        <div class="line-scale-pulse-out">
            <div class="bg-white"></div>
            <div class="bg-white"></div>
            <div class="bg-white"></div>
            <div class="bg-white"></div>
            <div class="bg-white"></div>
        </div>
    </div>
    <div class="d-none loader" style="background:#0000009c; border:none; margin:0px; padding:0px; width:100%; height:100%; top:0px; left:0px; position:fixed; z-index:2"></div>

    <div class="responseDiv"></div>

    <form id="derseKatilForm" class="mb-4">
        <div class="row g-0">
            <div class="col-lg-5 m-auto">
                <div class="card shadow p-4">
                    <div class="row">
                        <div class="col-12 text-center">
                            <img src="../assets/img/logo-kucuk.png" width="140">
                            <p class="h5 opacity-75 mt-4">Yoklama Kontrol Sistemi</p>
                            <p class="h6 opacity-50">Öğrenci Girişi</p>
                        </div>

                        <div class="col-12 mt-4">
                            <label class="fw-semibold">Öğrenci Numarası</label>
                            <input class="form-control ogrenciNo" type="text" name="ogrenciNo" placeholder="_ _ _ _ _ _ _ _ _ _ _" oninput="ogrenciBilgiGetir(this.value);">
                        </div>

                        <div class="col-12">
                            <div class="row ogrenciBilgi">
                                <div class="col-6 mt-4">
                                    <label class="fw-semibold">Öğrenci Ad Soyad</label>
                                    <input class="form-control" type="text" disabled>
                                </div>

                                <div class="col-6 mt-4">
                                    <label class="fw-semibold">Öğrenci Bölüm</label>
                                    <input class="form-control" type="text" disabled>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 mt-4">
                            <label class="fw-semibold">Ders Aktivasyon Kodu</label>
                            <input class="form-control yoklamaKodu" type="text" name="yoklamaKodu" placeholder="_ _ _ _ _ _ _" oninput="dersBilgiGetir(this.value);">
                        </div>

                        <div class="col-12 mt-4">
                                                    </div>

                        <div class="col-12 mt-3 dersBilgi">
                            <label class="fw-semibold">Ders</label>
                            
        <select class="form-control" name="yoklamaDers" disabled>
            <option value="">Seçiniz...</option>
        </select>                        </div>

                        <div class="col-6 mt-4 text-center">
                            <button type="submit" class="btn btn-success-2  fw-semibold"><i class="bi bi-clock-history me-2"></i> DERSE KATIL</button>
                        </div>
                        <div class="col-6 mt-4 text-center">
                            <a href="ogrenci/devam-devamsizlik" target="_blank"><button type="button" class="btn btn-info-2 w-100 fw-semibold"><i class="bi bi-calendar4-week me-2"></i> YOKLAMA BİLGİLERİM</button></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8/jquery.inputmask.min.js" integrity="sha512-efAcjYoYT0sXxQRtxGY37CKYmqsFVOIwMApaEbrxJr4RwqVVGw8o+Lfh/+59TU07+suZn1BWq4fDl5fdgyCNkw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        $(".ogrenciNo").inputmask("9 9 9 9 9 9 9 9 9 9 9 9");
        $(".yoklamaKodu").inputmask("9 9 9 9 9 9 9");

        function ogrenciBilgiGetir(ogrenciNo) {
            uzunluk = ogrenciNo.replace(/[_\s]/g, '').length;

            setTimeout(() => {
                if (uzunluk >= 11) {
                    $.ajax({
                        type: "POST",
                        url: "https://pdks.nisantasi.edu.tr/ogrenci/giris-islem",
                        dataType: 'json',
                        data: {
                            name: "ogrenciBilgiGetir",
                            ogrenciNo: ogrenciNo
                        },
                        beforeSend: function(response) {
                            $(".loader").toggleClass("d-none");
                        },
                        success: function(response) {
                            $(".ogrenciBilgi").empty();
                            if (response.icerik) {
                                $(".ogrenciBilgi").append(response.icerik);
                            }

                            $(".loader").toggleClass("d-none");
                        }
                    });
                }
            }, 1000);
        }


        function dersBilgiGetir(yoklamaKodu) {
            uzunluk = yoklamaKodu.replace(/[_\s]/g, '').length;

            setTimeout(() => {
                if (uzunluk == 7) {
                    $.ajax({
                        type: "POST",
                        url: "https://pdks.nisantasi.edu.tr/ogrenci/giris-islem",
                        dataType: 'json',
                        data: {
                            name: "dersBilgiGetir",
                            yoklamaKodu: yoklamaKodu
                        },
                        beforeSend: function(response) {
                            $(".loader").toggleClass("d-none");
                        },
                        success: function(response) {
                            $(".dersBilgi").empty();
                            if (response.icerik) {
                                $(".dersBilgi").append(response.icerik);
                            }

                            $(".loader").toggleClass("d-none");
                        }
                    });
                }
            }, 1000);
        }


        $("#derseKatilForm").submit(function(e) {
            e.preventDefault();

            var formData = new FormData(this);
            formData.append("name", "derseKatil");
            formData.append("getKod", "");

            $.ajax({
                type: "POST",
                url: "https://pdks.nisantasi.edu.tr/ogrenci/giris-islem",
                dataType: 'json',
                contentType: false,
                processData: false,
                data: formData,
                beforeSend: function(response) {
                    $(".loader").toggleClass("d-none");
                },
                success: function(response) {
                    $(".responseDiv").empty();
                    if (response.mesaj) {
                        $(".responseDiv").append(response.mesaj);

                        $("#mesajModal").modal("show");
                    }

                    $(".loader").toggleClass("d-none");
                }
            });
        });
    </script>
</body>

</html>